---
type: algorithm
tags:
category: åŠ¨æ€è§„åˆ’
difficulty: ğŸŸ¡ Medium
leetcode: 139
created: 2026-02-28 22:04
obsidian-note-status:
  - colorful:needsUpdate
---

## é¢˜ç›®
![[139.png]]
![[139_1.png]]

**æç¤ºï¼š**

- `1 <= s.length <= 300`
- `1 <= wordDict.length <= 1000`
- `1 <= wordDict[i].length <= 20`
- `s` å’Œ `wordDict[i]` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `wordDict` ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²**äº’ä¸ç›¸åŒ**

## æ€è·¯ï¼ˆå¿…å¡«ï¼‰
### ç®—æ³•é€‰æ‹©

åŠ¨æ€è§„åˆ’ã€‚dp[i] è¡¨ç¤º `s[0..i)` æ˜¯å¦å¯è¢«æ‹†åˆ†ã€‚å¯¹æ¯ä¸ªä½ç½® iï¼Œæšä¸¾å¯èƒ½çš„åˆ†å‰²ç‚¹ jï¼Œæ£€æŸ¥â€œå‰ç¼€å¯æ‹†åˆ†â€ä¸”â€œåç¼€åœ¨å­—å…¸ä¸­â€ã€‚

### å®ç°æ­¥éª¤
1. å­—å…¸è½¬ HashSetï¼Œè·å¾— O(1) æŸ¥æ‰¾èƒ½åŠ›
2. é¢„è®¡ç®— maxLenï¼Œé™åˆ¶å†…å±‚éå†èŒƒå›´
3. dp[0] = trueï¼Œç©ºä¸²å¯æ‹†åˆ†
4. å¯¹ i ä» 1 åˆ° nï¼Œéå†åˆ†å‰²ç‚¹ jï¼ˆèŒƒå›´ [max(0, i-maxLen), i)ï¼‰
5. å…ˆæŸ¥ dp[j]ï¼ˆO(1)ï¼‰ï¼Œå†æŸ¥ wordSet.contains(s.substring(j, i))
6. ä¸¤è€…éƒ½ä¸º true åˆ™ dp[i] = trueï¼Œbreak
7. è¿”å› dp[n]

### çŠ¶æ€è½¬ç§»å›¾è§£

ä»¥ s = â€œleetcodeâ€ï¼Œå­—å…¸ = [â€œleetâ€, â€œcodeâ€] ä¸ºä¾‹ï¼š

```
ç´¢å¼•:  0  1  2  3  4  5  6  7  8
å­—ç¬¦:     l  e  e  t  c  o  d  e
dp:   T  F  F  F  T  F  F  F  T
                  â†‘              â†‘
             "leet"åœ¨å­—å…¸ä¸­   "code"åœ¨å­—å…¸ä¸­
             ä¸”dp[0]=T       ä¸”dp[4]=T
```

- dp[4]ï¼šj=0 æ—¶ï¼Œdp[0]=true ä¸” â€œleetâ€ åœ¨å­—å…¸ä¸­ â†’ dp[4]=true
- dp[8]ï¼šj=4 æ—¶ï¼Œdp[4]=true ä¸” â€œcodeâ€ åœ¨å­—å…¸ä¸­ â†’ dp[8]=true

### å¾ªç¯éå†å›¾è§£

ä»¥ s = â€œleetcodeâ€ï¼ŒwordDict = [â€œleetâ€, â€œcodeâ€]ï¼ŒmaxLen = 4 ä¸ºä¾‹ï¼š

```
åˆå§‹çŠ¶æ€

ç´¢å¼•:   0    1    2    3    4    5    6    7    8
å­—ç¬¦:        l    e    e    t    c    o    d    e
dp:    [T]  [F]  [F]  [F]  [F]  [F]  [F]  [F]  [F]

---
i = 1ï¼Œj èŒƒå›´ï¼š[max(0, 1-4), 1) â†’ [0, 1)

s:   l  e  e  t  c  o  d  e
     â†‘
     j=0  i=1

j=0: dp[0]=T âœ“ â†’ substring(0,1)="l" â†’ contains? âœ—
ç»“æœ: dp[1] = F

i = 2ï¼Œj èŒƒå›´ï¼š[0, 2)

s:   l  e  e  t  c  o  d  e
     â†‘  â†‘
     j=0 i=2

j=0: dp[0]=T âœ“ â†’ "le" â†’ contains? âœ—
j=1: dp[1]=F âœ— â†’ çŸ­è·¯è·³è¿‡ï¼Œä¸åˆ›å»º substring
ç»“æœ: dp[2] = F

i = 3ï¼Œj èŒƒå›´ï¼š[0, 3)

s:   l  e  e  t  c  o  d  e
     â†‘     â†‘
     j=0   i=3

j=0: dp[0]=T âœ“ â†’ "lee" â†’ contains? âœ—
j=1: dp[1]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=2: dp[2]=F âœ— â†’ çŸ­è·¯è·³è¿‡
ç»“æœ: dp[3] = F

i = 4ï¼Œj èŒƒå›´ï¼š[0, 4) â­ å…³é”®è½¬æŠ˜

s:   l  e  e  t  c  o  d  e
     â†‘        â†‘
     j=0      i=4

j=0: dp[0]=T âœ“ â†’ substring(0,4)="leet" â†’ contains? âœ… å‘½ä¸­ï¼break!
ç»“æœ: dp[4] = T âœ…

dp:  [T]  [F]  [F]  [F]  [T]  [F]  [F]  [F]  [F]
                          â†‘
                       "leet" åŒ¹é…

i = 5ï¼Œj èŒƒå›´ï¼š[max(0, 5-4), 5) â†’ [1, 5)

s:   l  e  e  t  c  o  d  e
        â†‘        â†‘
        j=1      i=5

j=1: dp[1]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=2: dp[2]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=3: dp[3]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=4: dp[4]=T âœ“ â†’ substring(4,5)="c" â†’ contains? âœ—
ç»“æœ: dp[5] = F

i = 6ï¼Œj èŒƒå›´ï¼š[2, 6)

j=2: dp[2]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=3: dp[3]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=4: dp[4]=T âœ“ â†’ substring(4,6)="co" â†’ contains? âœ—
j=5: dp[5]=F âœ— â†’ çŸ­è·¯è·³è¿‡
ç»“æœ: dp[6] = F

i = 7ï¼Œj èŒƒå›´ï¼š[3, 7)

j=3: dp[3]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=4: dp[4]=T âœ“ â†’ substring(4,7)="cod" â†’ contains? âœ—
j=5: dp[5]=F âœ— â†’ çŸ­è·¯è·³è¿‡
j=6: dp[6]=F âœ— â†’ çŸ­è·¯è·³è¿‡
ç»“æœ: dp[7] = F

i = 8ï¼Œj èŒƒå›´ï¼š[max(0, 8-4), 8) â†’ [4, 8) â­ æœ€ç»ˆå‘½ä¸­

s:   l  e  e  t  c  o  d  e
                 â†‘        â†‘
                j=4      i=8

j=4: dp[4]=T âœ“ â†’ substring(4,8)="code" â†’ contains? âœ… å‘½ä¸­ï¼break!
ç»“æœ: dp[8] = T âœ…

---
æœ€ç»ˆçŠ¶æ€

ç´¢å¼•:   0    1    2    3    4    5    6    7    8
å­—ç¬¦:        l    e    e    t    c    o    d    e
dp:    [T]  [F]  [F]  [F]  [T]  [F]  [F]  [F]  [T]
        â†‘                   â†‘                    â†‘
       ç©ºä¸²              "leet"              "code"
       å¯æ‹†             dp[0]=T             dp[4]=T
                      + "leet"âˆˆå­—å…¸        + "code"âˆˆå­—å…¸

è¿”å› dp[8] = true â†’ "leetcode" = "leet" + "code" âœ…
i
---
ä¼˜åŒ–æ•ˆæœç»Ÿè®¡

â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  i   â”‚ j èŒƒå›´  â”‚ å®é™…éå†æ¬¡æ•°  â”‚ çŸ­è·¯è·³è¿‡æ¬¡æ•°   â”‚ substring åˆ›å»ºæ¬¡æ•°  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1    â”‚ [0,1)  â”‚ 1            â”‚ 0            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2    â”‚ [0,2)  â”‚ 2            â”‚ 1            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3    â”‚ [0,3)  â”‚ 3            â”‚ 2            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4    â”‚ [0,4)  â”‚ 1            â”‚ 0            â”‚ 1ï¼ˆå‘½ä¸­å breakï¼‰   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5    â”‚ [1,5)  â”‚ 4            â”‚ 3            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6    â”‚ [2,6)  â”‚ 4            â”‚ 3            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 7    â”‚ [3,7)  â”‚ 4            â”‚ 3            â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 8    â”‚ [4,8)  â”‚ 1            â”‚ 0            â”‚ 1ï¼ˆå‘½ä¸­å breakï¼‰   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆè®¡  â”‚        â”‚ 20           â”‚ 12           â”‚ 8                 â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

20 æ¬¡å¾ªç¯ä¸­æœ‰ 12 æ¬¡è¢« dp[j]=false çŸ­è·¯è·³è¿‡ï¼Œ60% çš„è¿­ä»£é¿å…äº† substring åˆ›å»ºå’Œ Hash è®¡ç®—ã€‚å¦‚æœæ²¡æœ‰ maxLen å‰ªæï¼Œæ€»éå†æ¬¡æ•°å°†æ˜¯ 1+2+3+...+8 = 36 æ¬¡ï¼Œç°åœ¨åªæœ‰ 20 æ¬¡ï¼Œå‡å°‘äº† 44%ã€‚
```

## å…³é”®ç‚¹

> [!Tip]
> - maxLen å‰ªææ˜¯æ ¸å¿ƒä¼˜åŒ–â€”â€”å­ä¸²é•¿åº¦ä¸å¯èƒ½è¶…è¿‡æœ€é•¿å•è¯ï¼Œå¤§å¹…ç¼©å°æœç´¢ç©ºé—´
> - çŸ­è·¯é¡ºåºæ˜¯éšè—ä¼˜åŒ–â€”â€”dp[j] æ”¾å‰é¢ï¼Œä¸º false æ—¶è·³è¿‡æ˜‚è´µçš„å­—ç¬¦ä¸²æ“ä½œ

## ä»£ç 

```java
class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        Set<String> wordSet = new HashSet<>(wordDict);
        int n = s.length();

        // è®°å½•å­—å…¸ä¸­å•è¯æœ€å¤§é•¿åº¦ï¼Œé™åˆ¶å†…å±‚éå†èŒƒå›´
        int maxLen = 0;
        for (String word : wordDict) {
            maxLen = Math.max(maxLen, word.length());
        }

        boolean[] dp = new boolean[n + 1];
        dp[0] = true;

        for (int i = 1; i <= n; i++) {
            // éå†åˆ†å‰²ç‚¹ï¼Œåˆ©ç”¨ HashSet O(1) æŸ¥æ‰¾
            for (int j = Math.max(0, i - maxLen); j < i; j++) {
                if (dp[j] && wordSet.contains(s.substring(j, i))) {
                    dp[i] = true;
                    break;
                }
            }
        }
        return dp[n];
    }
}
```

## çŸ¥è¯†ç‚¹


## å¤æ‚åº¦

- Time: O()
- Space: O()

## ç›¸ä¼¼é¢˜ç›®

- [[70.çˆ¬æ¥¼æ¢¯]]
- [[322.é›¶é’±å…‘æ¢]]
- [[279.å®Œå…¨å¹³æ–¹æ•°]]

